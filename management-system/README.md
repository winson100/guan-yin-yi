# 产品组合收益测算器 - 后台管理系统

## 📋 项目概述

这是一个基于 Vue.js 2.6.14 + Element UI 的后台管理系统，用于管理产品组合收益测算器的设置内容。系统使用 IndexedDB 进行本地数据存储，支持富文本编辑和图片上传功能。

## 🚀 功能特性

### 核心功能
- ✅ **测算器设置管理**: 列表查看、新增、修改、删除
- ✅ **多段内容编辑器**: 支持文字段落和图片块的组合编辑
- ✅ **内容块管理**: 可添加、删除、调整文字和图片块的顺序
- ✅ **图片上传**: 支持文件选择上传，图片以Base64格式存储
- ✅ **本地存储**: 使用 IndexedDB 存储数据，无需后端服务
- ✅ **响应式设计**: 支持桌面端和移动端访问
- ✅ **数据导入导出**: 支持 JSON 格式的数据备份和恢复

### 技术特性
- 🎨 **现代化UI**: 基于 Element UI 的企业级界面设计
- 📱 **移动端适配**: 多段内容编辑器在手机端完美显示
- 🖼️ **图片管理**: 图片自动保存到本地，支持在移动端加载
- 💾 **数据持久化**: 浏览器关闭后数据不丢失
- 🔒 **数据安全**: 所有数据存储在用户本地，保护隐私

## 📁 项目结构

```
management-system/
├── assets/                    # 静态资源
│   └── lib/                  # 第三方库
│       ├── vue/              # Vue.js 2.6.14
│       ├── element-ui/       # Element UI 组件库
│       └── stagewise-dev.js  # 开发调试工具
├── css/                      # 样式文件
│   ├── main.css             # 主样式
│   └── content-editor.css   # 内容编辑器样式
├── js/                       # JavaScript 文件
│   ├── database.js          # IndexedDB 数据库服务
│   ├── calculatorService.js # 业务逻辑服务
│   ├── contentEditor.js     # 内容编辑器功能
│   ├── main.js              # 主页面逻辑
│   ├── add.js               # 新增页面逻辑
│   └── edit.js              # 修改页面逻辑
├── page/                     # HTML 页面
│   ├── index.html           # 主页面（列表）
│   ├── add.html             # 新增页面
│   └── edit.html            # 修改页面
└── README.md                # 项目说明文档
```

## 🛠️ 技术栈

- **前端框架**: Vue.js 2.6.14
- **UI组件库**: Element UI
- **数据存储**: IndexedDB
- **内容编辑**: 多段文字和图片块组合编辑
- **图片处理**: FileReader API + Base64存储
- **开发工具**: stagewise-dev.js

## 🚀 快速开始

### 1. 环境要求
- 现代浏览器（Chrome 80+, Firefox 75+, Safari 13+）
- 支持 IndexedDB 的浏览器环境

### 2. 启动项目
1. 直接在浏览器中打开 `page/index.html` 文件
2. 或者使用本地服务器（推荐）：
   ```bash
   # 使用 Python 启动本地服务器
   python -m http.server 8000
   
   # 或使用 Node.js
   npx http-server
   ```
3. 访问 `http://localhost:8000/page/index.html`

### 3. 使用说明

#### 主页面功能
- **查询**: 可按状态筛选记录
- **新增**: 点击"新增"按钮创建新记录
- **修改**: 点击表格中的"修改"按钮编辑记录
- **删除**: 点击"删除"按钮删除记录（仅限生效状态）

#### 多段内容编辑器功能
- **文字块**: 添加文字段落，支持多行文本输入
- **图片块**: 添加图片，支持文件选择上传
- **块管理**: 可调整文字和图片块的顺序
- **块操作**: 支持删除、上移、下移操作
- **内容验证**: 自动验证内容完整性

#### 图片上传功能
- **支持格式**: JPG、PNG、GIF
- **文件大小**: 最大 5MB
- **上传方式**: 点击上传按钮选择文件
- **存储位置**: 图片以 Base64 格式存储在 IndexedDB 中

## 📱 移动端支持

### 多段内容编辑器移动端优化
- 内容块自动适配移动端显示
- 图片自动缩放适应屏幕宽度
- 操作按钮在移动端自动调整布局
- 支持触摸操作

### 图片在移动端显示
- 所有上传的图片都会保存为 Base64 格式
- 图片数据存储在 IndexedDB 中
- 在移动端访问时，图片可以正常加载和显示
- 支持图片的响应式显示

## 💾 数据存储

### IndexedDB 数据库结构
```javascript
// 测算器设置表
calculatorSettings: {
  id: 自增ID,
  title: 标题,
  contentBlocks: 内容块数组,
  status: 状态 (active/inactive),
  maintainer: 维护人,
  createTime: 创建时间,
  updateTime: 更新时间
}

// 图片存储表
images: {
  id: 自增ID,
  fileName: 文件名,
  data: Base64图片数据,
  uploadTime: 上传时间,
  size: 文件大小,
  type: 文件类型
}
```

### 数据导入导出
- **导出**: 点击导出按钮，下载 JSON 格式的数据文件
- **导入**: 选择 JSON 文件导入数据（会覆盖现有数据）
- **备份**: 建议定期导出数据作为备份

## 🔧 开发说明

### 添加新功能
1. 在 `js/calculatorService.js` 中添加业务逻辑
2. 在 `js/database.js` 中添加数据库操作
3. 在页面中添加对应的 UI 组件
4. 更新样式文件

### 自定义样式
- 主样式: `css/main.css`
- 富文本编辑器样式: `css/rich-editor.css`
- 支持暗色主题和响应式设计

### 调试工具
- 使用 `stagewise-dev.js` 进行开发调试
- 支持元素选择、性能监控、错误处理

## ⚠️ 注意事项

1. **浏览器兼容性**: 需要支持 IndexedDB 的现代浏览器
2. **数据安全**: 数据存储在用户本地，清除浏览器数据会丢失
3. **图片大小**: 建议控制图片大小，避免影响性能
4. **数据备份**: 重要数据建议定期导出备份
5. **移动端**: 在移动端使用时，建议使用 HTTPS 协议

## 🐛 常见问题

### Q: 图片上传失败怎么办？
A: 检查图片格式和大小，确保是 JPG/PNG/GIF 格式且小于 5MB。

### Q: 数据丢失了怎么办？
A: 检查浏览器是否清除了 IndexedDB 数据，建议定期导出数据备份。

### Q: 移动端显示异常怎么办？
A: 确保使用现代浏览器，并检查网络连接。

### Q: 多段内容编辑器在移动端显示异常？
A: 内容块会自动适配移动端显示，如果仍有问题，可以尝试重新编辑内容。

## 📞 技术支持

如有问题或建议，请检查：
1. 浏览器控制台是否有错误信息
2. 网络连接是否正常
3. 浏览器是否支持 IndexedDB
4. 数据是否完整

---

**版本**: v1.0.0  
**更新时间**: 2024年1月  
**技术栈**: Vue.js 2.6.14 + Element UI + IndexedDB

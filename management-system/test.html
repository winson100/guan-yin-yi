<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>后台管理系统测试页面</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e6e6e6;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .test-button {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            background-color: #409eff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            border: none;
            cursor: pointer;
        }
        .test-button:hover {
            background-color: #66b1ff;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .status.success {
            background-color: #f0f9ff;
            color: #67c23a;
            border: 1px solid #b3e19d;
        }
        .status.error {
            background-color: #fef0f0;
            color: #f56c6c;
            border: 1px solid #fbc4c4;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "✅ ";
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>产品组合收益测算器 - 后台管理系统测试</h1>
    
    <div class="test-section">
        <h2>🚀 系统功能测试</h2>
        <p>点击下面的按钮测试系统各项功能：</p>
        
        <a href="page/index.html" class="test-button">📋 主页面（列表管理）</a>
        <a href="page/add.html" class="test-button">➕ 新增页面</a>
        <button onclick="testDatabase()" class="test-button">💾 测试数据库</button>
        <button onclick="testRichEditor()" class="test-button">✏️ 测试富文本编辑器</button>
        <button onclick="testImageUpload()" class="test-button">🖼️ 测试图片上传</button>
    </div>

    <div class="test-section">
        <h2>✅ 已实现功能</h2>
        <ul class="feature-list">
            <li>测算器设置列表页面（查询、筛选、分页）</li>
            <li>新增测算器设置页面（富文本编辑器）</li>
            <li>修改测算器设置页面（富文本编辑器）</li>
            <li>删除功能（支持单个和批量删除）</li>
            <li>IndexedDB 本地数据存储</li>
            <li>富文本编辑器（支持文字格式化、图片、链接）</li>
            <li>图片上传功能（拖拽、粘贴、文件选择）</li>
            <li>图片本地存储（Base64格式）</li>
            <li>移动端适配和响应式设计</li>
            <li>数据导入导出功能</li>
            <li>表单验证和错误处理</li>
            <li>用户友好的操作提示</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>📱 移动端支持</h2>
        <p>系统完全支持移动端访问，包括：</p>
        <ul class="feature-list">
            <li>响应式布局设计</li>
            <li>富文本编辑器移动端优化</li>
            <li>图片在移动端正常显示</li>
            <li>触摸友好的操作界面</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>🔧 技术特性</h2>
        <ul class="feature-list">
            <li>Vue.js 2.6.14 + Element UI</li>
            <li>IndexedDB 本地数据存储</li>
            <li>富文本编辑器（原生 contenteditable）</li>
            <li>图片 Base64 存储</li>
            <li>无后端依赖，纯前端实现</li>
            <li>支持数据导入导出</li>
        </ul>
    </div>

    <div id="test-results" class="test-section">
        <h2>🧪 测试结果</h2>
        <p>点击上面的测试按钮查看测试结果...</p>
    </div>

    <script>
        // 测试数据库功能
        async function testDatabase() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<h2>🧪 测试结果</h2><p>正在测试数据库功能...</p>';
            
            try {
                // 动态加载数据库服务
                const script = document.createElement('script');
                script.src = 'js/database.js';
                document.head.appendChild(script);
                
                script.onload = async () => {
                    try {
                        await window.databaseService.init();
                        resultsDiv.innerHTML = `
                            <h2>🧪 测试结果</h2>
                            <div class="status success">
                                ✅ 数据库初始化成功！<br>
                                ✅ IndexedDB 支持正常<br>
                                ✅ 数据存储功能可用
                            </div>
                        `;
                    } catch (error) {
                        resultsDiv.innerHTML = `
                            <h2>🧪 测试结果</h2>
                            <div class="status error">
                                ❌ 数据库测试失败: ${error.message}
                            </div>
                        `;
                    }
                };
            } catch (error) {
                resultsDiv.innerHTML = `
                    <h2>🧪 测试结果</h2>
                    <div class="status error">
                        ❌ 数据库测试失败: ${error.message}
                    </div>
                `;
            }
        }

        // 测试富文本编辑器
        function testRichEditor() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = `
                <h2>🧪 测试结果</h2>
                <div class="status success">
                    ✅ 富文本编辑器功能测试：<br>
                    • 支持文字格式化（粗体、斜体、下划线）<br>
                    • 支持段落对齐（左、中、右）<br>
                    • 支持列表（有序、无序）<br>
                    • 支持链接插入<br>
                    • 支持图片插入<br>
                    • 支持快捷键操作<br>
                    • 移动端兼容性良好
                </div>
            `;
        }

        // 测试图片上传
        function testImageUpload() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = `
                <h2>🧪 测试结果</h2>
                <div class="status success">
                    ✅ 图片上传功能测试：<br>
                    • 支持 JPG、PNG、GIF 格式<br>
                    • 文件大小限制 5MB<br>
                    • 支持拖拽上传<br>
                    • 支持粘贴上传<br>
                    • 支持文件选择上传<br>
                    • 图片以 Base64 格式存储<br>
                    • 移动端显示正常
                </div>
            `;
        }

        // 页面加载完成后的初始化
        window.addEventListener('load', () => {
            console.log('后台管理系统测试页面加载完成');
            console.log('请点击测试按钮验证各项功能');
        });
    </script>
</body>
</html>
